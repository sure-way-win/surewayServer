{"ast":null,"code":"import React from\"react\";import{Link,Redirect}from\"react-router-dom\";import Joi from\"joi-browser\";import Form from\"./common/form\";import auth from\"../services/authService\";import\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class LoginForm extends Form{constructor(){super(...arguments);this.state={data:{username:\"\",password:\"\"},errors:{}};this.schema={username:Joi.string().required().label(\"Username\"),password:Joi.string().required().label(\"Password\")};this.doSubmit=async()=>{try{const{data}=this.state;await auth.login({username:data.username,password:data.password});const{state}=this.props.location;window.location=state?state.from.pathname:\"/home\";}catch(ex){if(ex.response){const errors={...this.state.errors};errors.username=ex.response.data;this.setState({errors});}}};}render(){if(auth.getCurrentUser())return/*#__PURE__*/_jsx(Redirect,{to:\"/home\"});return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),this.renderInput(\"username\",\"Username\"),this.renderInput(\"password\",\"Password\",\"password\"),\" \",/*#__PURE__*/_jsx(\"br\",{}),this.renderButton(\"Login\"),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p1\",{children:[\" \",\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\" Sign Up\"})]})]})})});}}export default LoginForm;","map":{"version":3,"names":["React","Link","Redirect","Joi","Form","auth","jsx","_jsx","jsxs","_jsxs","LoginForm","constructor","arguments","state","data","username","password","errors","schema","string","required","label","doSubmit","login","props","location","window","from","pathname","ex","response","setState","render","getCurrentUser","to","className","children","onSubmit","handleSubmit","renderInput","renderButton"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/loginForm.jsx"],"sourcesContent":["import React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Joi from \"joi-browser\";\nimport Form from \"./common/form\";\nimport auth from \"../services/authService\";\nimport \"./login.css\";\n\nclass LoginForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    username: Joi.string().required().label(\"Username\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n\n  doSubmit = async () => {\n    try {\n      const { data } = this.state;\n      await auth.login({ username: data.username, password: data.password });\n\n      const { state } = this.props.location;\n      window.location = state ? state.from.pathname : \"/home\";\n    } catch (ex) {\n      if (ex.response) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    if (auth.getCurrentUser()) return <Redirect to=\"/home\" />;\n\n    return (\n      <div className=\"login-container\">\n        <div className=\"login-form\">\n          <form onSubmit={this.handleSubmit}>\n            <h1>Login</h1>\n            {this.renderInput(\"username\", \"Username\")}\n            {this.renderInput(\"password\", \"Password\", \"password\")} <br />\n            {this.renderButton(\"Login\")} <br />\n            <p1>\n              {\" \"}\n              Don't have an account?\n              <Link to=\"/signup\"> Sign Up</Link>\n            </p1>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,QAAQ,KAAQ,kBAAkB,CACjD,MAAO,CAAAC,GAAG,KAAM,aAAa,CAC7B,MAAO,CAAAC,IAAI,KAAM,eAAe,CAChC,MAAO,CAAAC,IAAI,KAAM,yBAAyB,CAC1C,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,SAAS,QAAS,CAAAN,IAAK,CAAAO,YAAA,WAAAC,SAAA,OAC3BC,KAAK,CAAG,CACNC,IAAI,CAAE,CAAEC,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CACpCC,MAAM,CAAE,CAAC,CACX,CAAC,MAEDC,MAAM,CAAG,CACPH,QAAQ,CAAEZ,GAAG,CAACgB,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAU,CAAC,CACnDL,QAAQ,CAAEb,GAAG,CAACgB,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAU,CACpD,CAAC,MAEDC,QAAQ,CAAG,SAAY,CACrB,GAAI,CACF,KAAM,CAAER,IAAK,CAAC,CAAG,IAAI,CAACD,KAAK,CAC3B,KAAM,CAAAR,IAAI,CAACkB,KAAK,CAAC,CAAER,QAAQ,CAAED,IAAI,CAACC,QAAQ,CAAEC,QAAQ,CAAEF,IAAI,CAACE,QAAS,CAAC,CAAC,CAEtE,KAAM,CAAEH,KAAM,CAAC,CAAG,IAAI,CAACW,KAAK,CAACC,QAAQ,CACrCC,MAAM,CAACD,QAAQ,CAAGZ,KAAK,CAAGA,KAAK,CAACc,IAAI,CAACC,QAAQ,CAAG,OAAO,CACzD,CAAE,MAAOC,EAAE,CAAE,CACX,GAAIA,EAAE,CAACC,QAAQ,CAAE,CACf,KAAM,CAAAb,MAAM,CAAG,CAAE,GAAG,IAAI,CAACJ,KAAK,CAACI,MAAO,CAAC,CACvCA,MAAM,CAACF,QAAQ,CAAGc,EAAE,CAACC,QAAQ,CAAChB,IAAI,CAClC,IAAI,CAACiB,QAAQ,CAAC,CAAEd,MAAO,CAAC,CAAC,CAC3B,CACF,CACF,CAAC,EAEDe,MAAMA,CAAA,CAAG,CACP,GAAI3B,IAAI,CAAC4B,cAAc,CAAC,CAAC,CAAE,mBAAO1B,IAAA,CAACL,QAAQ,EAACgC,EAAE,CAAC,OAAO,CAAE,CAAC,CAEzD,mBACE3B,IAAA,QAAK4B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B7B,IAAA,QAAK4B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzB3B,KAAA,SAAM4B,QAAQ,CAAE,IAAI,CAACC,YAAa,CAAAF,QAAA,eAChC7B,IAAA,OAAA6B,QAAA,CAAI,OAAK,CAAI,CAAC,CACb,IAAI,CAACG,WAAW,CAAC,UAAU,CAAE,UAAU,CAAC,CACxC,IAAI,CAACA,WAAW,CAAC,UAAU,CAAE,UAAU,CAAE,UAAU,CAAC,CAAC,GAAC,cAAAhC,IAAA,QAAK,CAAC,CAC5D,IAAI,CAACiC,YAAY,CAAC,OAAO,CAAC,CAAC,GAAC,cAAAjC,IAAA,QAAK,CAAC,cACnCE,KAAA,OAAA2B,QAAA,EACG,GAAG,CAAC,wBAEL,cAAA7B,IAAA,CAACN,IAAI,EAACiC,EAAE,CAAC,SAAS,CAAAE,QAAA,CAAC,UAAQ,CAAM,CAAC,EAChC,CAAC,EACD,CAAC,CACJ,CAAC,CACH,CAAC,CAEV,CACF,CAEA,cAAe,CAAA1B,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}