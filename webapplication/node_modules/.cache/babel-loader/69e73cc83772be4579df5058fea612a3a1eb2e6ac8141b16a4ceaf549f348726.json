{"ast":null,"code":"import React,{Component}from\"react\";import Joi from\"joi-browser\";import Input from\"./input\";import Select from\"./select\";import{jsx as _jsx}from\"react/jsx-runtime\";class Form extends Component{constructor(){super(...arguments);this.state={data:{},errors:{}};this.validate=()=>{const options={abortEarly:false};const{error}=Joi.validate(this.state.data,this.schema,options);if(!error)return null;const errors={};for(let item of error.details)errors[item.path[0]]=item.message;return errors;};this.validateProperty=_ref=>{let{name,value}=_ref;const obj={[name]:value};const schema={[name]:this.schema[name]};const{error}=Joi.validate(obj,schema);return error?error.details[0].message:null;};this.handleSubmit=e=>{e.preventDefault();const errors=this.validate();this.setState({errors:errors||{}});if(errors)return;this.doSubmit();};this.handleChange=_ref2=>{let{currentTarget:input}=_ref2;const errors={...this.state.errors};const errorMessage=this.validateProperty(input);if(errorMessage)errors[input.name]=errorMessage;else delete errors[input.name];const data={...this.state.data};data[input.name]=input.value;this.setState({data,errors});};}renderButton(label){return/*#__PURE__*/_jsx(\"button\",{disabled:this.validate(),className:\"btn btn-primary\",children:label});}renderSelect(name,label,options){const{data,errors}=this.state;return/*#__PURE__*/_jsx(Select,{name:name,value:data[name],label:label,options:options,onChange:this.handleChange,error:errors[name]});}renderInput(name,label){let type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"text\";const{data,errors}=this.state;return/*#__PURE__*/_jsx(Input,{type:type,name:name,value:data[name],label:label,onChange:this.handleChange,error:errors[name]});}}export default Form;","map":{"version":3,"names":["React","Component","Joi","Input","Select","jsx","_jsx","Form","constructor","arguments","state","data","errors","validate","options","abortEarly","error","schema","item","details","path","message","validateProperty","_ref","name","value","obj","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","_ref2","currentTarget","input","errorMessage","renderButton","label","disabled","className","children","renderSelect","onChange","renderInput","type","length","undefined"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/common/form.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\n\nclass Form extends Component {\n  state = {\n    data: {},\n    errors: {}\n  };\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const { error } = Joi.validate(this.state.data, this.schema, options);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) errors[item.path[0]] = item.message;\n    return errors;\n  };\n\n  validateProperty = ({ name, value }) => {\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const errors = this.validate();\n    this.setState({ errors: errors || {} });\n    if (errors) return;\n\n    this.doSubmit();\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n\n    this.setState({ data, errors });\n  };\n\n  renderButton(label) {\n    return (\n      <button disabled={this.validate()} className=\"btn btn-primary\">\n        {label}\n      </button>\n    );\n  }\n\n  renderSelect(name, label, options) {\n    const { data, errors } = this.state;\n\n    return (\n      <Select\n        name={name}\n        value={data[name]}\n        label={label}\n        options={options}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n\n  renderInput(name, label, type = \"text\") {\n    const { data, errors } = this.state;\n\n    return (\n      <Input\n        type={type}\n        name={name}\n        value={data[name]}\n        label={label}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n}\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}