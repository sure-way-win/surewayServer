{"ast":null,"code":"import React,{Component}from\"react\";import SearchBox from\"./common/searchBox\";import{getDrivers}from\"../services/driverRecordsservices\";import userbanner from\"../images/userbanner.jpg\";import{Route}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";class DriverRecord extends Component{constructor(){super(...arguments);this.state={drivers:[],selectedDriver:\"\",searchQuery:\"\"};this.handleUserSelect=user=>{this.setState({selectedDriver:user});};this.handleSearch=query=>{this.setState({searchQuery:query});};this.filterUsers=()=>{const{drivers,searchQuery}=this.state;if(!searchQuery)return drivers;const filtereddrivers=drivers.filter(user=>{var _user$firstName;return user===null||user===void 0?void 0:(_user$firstName=user.firstName)===null||_user$firstName===void 0?void 0:_user$firstName.includes(searchQuery);});const remainingdrivers=drivers.filter(user=>!(filtereddrivers!==null&&filtereddrivers!==void 0&&filtereddrivers.includes(user)));return[...filtereddrivers,...remainingdrivers];};}async componentDidMount(){try{const{data}=await getDrivers();this.setState({drivers:data.gettingDrivers});this.setState({selectedDriver:data.gettingDrivers[0]});}catch(error){console.error(\"Error fetching users:\",error.message);}}render(){const{selectedDriver,searchQuery}=this.state;const filteredDrivers=this.filterUsers();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",style:{marginTop:16},children:filteredDrivers&&filteredDrivers.map(user=>/*#__PURE__*/_jsx(\"li\",{className:user===selectedDriver?\"list-group-item active\":\"list-group-item\",onClick:()=>this.handleUserSelect(user),children:user.firstName},user._id))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(SearchBox,{value:searchQuery,onChange:this.handleSearch}),selectedDriver?/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3\",style:{maxWidth:\"540px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:userbanner,className:\"img-fluid rounded-start\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:selectedDriver.firstName||\"No drivers\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"UserName: \",selectedDriver.userName,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Contact Number: \",selectedDriver.contactNumber,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Email: \",selectedDriver.email,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Address: \",selectedDriver.address,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"NIC: \",selectedDriver.NIC,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Licence Number: \",selectedDriver.licenseNumber,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Bus: \",selectedDriver.assignedVehicle,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Route,{to:\"/seeSnaps\",render:props=>/*#__PURE__*/_jsx(\"a\",{href:\"/seeSnaps\",className:\"btn btn-warning\",onClick:()=>props.history.push(\"/seeSnaps\",{selectedDriver}),children:\"See Snaps\"})})]})]})})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"No drivers available\"})]})]})});}}export default DriverRecord;","map":{"version":3,"names":["React","Component","SearchBox","getDrivers","userbanner","Route","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DriverRecord","constructor","arguments","state","drivers","selectedDriver","searchQuery","handleUserSelect","user","setState","handleSearch","query","filterUsers","filtereddrivers","filter","_user$firstName","firstName","includes","remainingdrivers","componentDidMount","data","gettingDrivers","error","console","message","render","filteredDrivers","children","className","style","marginTop","map","onClick","_id","value","onChange","maxWidth","src","alt","userName","contactNumber","email","address","NIC","licenseNumber","assignedVehicle","to","props","href","history","push"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/DriverRecord.jsx"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport SearchBox from \"./common/searchBox\";\r\nimport { getDrivers } from \"../services/driverRecordsservices\";\r\nimport userbanner from \"../images/userbanner.jpg\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nclass DriverRecord extends Component {\r\n  state = {\r\n    drivers: [],\r\n    selectedDriver: \"\",\r\n    searchQuery: \"\",\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const { data } = await getDrivers();\r\n      this.setState({ drivers: data.gettingDrivers });\r\n      this.setState({ selectedDriver: data.gettingDrivers[0] });\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error.message);\r\n    }\r\n  }\r\n\r\n  handleUserSelect = (user) => {\r\n    this.setState({ selectedDriver: user });\r\n  };\r\n\r\n  handleSearch = (query) => {\r\n    this.setState({ searchQuery: query });\r\n  };\r\n\r\n  filterUsers = () => {\r\n    const { drivers, searchQuery } = this.state;\r\n    if (!searchQuery) return drivers;\r\n\r\n    const filtereddrivers = drivers.filter((user) =>\r\n      user?.firstName?.includes(searchQuery)\r\n    );\r\n\r\n    const remainingdrivers = drivers.filter(\r\n      (user) => !filtereddrivers?.includes(user)\r\n    );\r\n\r\n    return [...filtereddrivers, ...remainingdrivers];\r\n  };\r\n\r\n  render() {\r\n    const { selectedDriver, searchQuery } = this.state;\r\n    const filteredDrivers = this.filterUsers();\r\n\r\n    return (\r\n      <>\r\n        <div className=\"row\">\r\n          <div className=\"col-3\">\r\n            <ul className=\"list-group\" style={{ marginTop: 16 }}>\r\n              {filteredDrivers &&\r\n                filteredDrivers.map((user) => (\r\n                  <li\r\n                    key={user._id}\r\n                    className={\r\n                      user === selectedDriver\r\n                        ? \"list-group-item active\"\r\n                        : \"list-group-item\"\r\n                    }\r\n                    onClick={() => this.handleUserSelect(user)}\r\n                  >\r\n                    {user.firstName}\r\n                  </li>\r\n                ))}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"col\">\r\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\r\n            {selectedDriver ? (\r\n              <div className=\"card mb-3\" style={{ maxWidth: \"540px\" }}>\r\n                <div className=\"row g-0\">\r\n                  <div className=\"col-md-4\">\r\n                    <img\r\n                      src={userbanner}\r\n                      className=\"img-fluid rounded-start\"\r\n                      alt=\"...\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-8\">\r\n                    <div className=\"card-body\">\r\n                      <h5 className=\"card-title\">\r\n                        {selectedDriver.firstName || \"No drivers\"}\r\n                      </h5>\r\n                      <p className=\"card-text\">\r\n                        UserName: {selectedDriver.userName} <br />\r\n                        Contact Number: {selectedDriver.contactNumber} <br />\r\n                        Email: {selectedDriver.email} <br />\r\n                        Address: {selectedDriver.address} <br />\r\n                        NIC: {selectedDriver.NIC} <br />\r\n                        Licence Number: {selectedDriver.licenseNumber} <br />\r\n                        Bus: {selectedDriver.assignedVehicle} <br />\r\n                        <Route\r\n                          to=\"/seeSnaps\"\r\n                          render={(props) => (\r\n                            <a\r\n                              href=\"/seeSnaps\"\r\n                              className=\"btn btn-warning\"\r\n                              onClick={() =>\r\n                                props.history.push(\"/seeSnaps\", {\r\n                                  selectedDriver,\r\n                                })\r\n                              }\r\n                            >\r\n                              See Snaps\r\n                            </a>\r\n                          )}\r\n                        />\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p>No drivers available</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DriverRecord;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}