{"ast":null,"code":"import React from\"react\";import{Link,Redirect}from\"react-router-dom\";import Joi from\"joi-browser\";import Form from\"./common/form\";import auth from\"../services/authService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class LoginForm extends Form{constructor(){super(...arguments);this.state={data:{username:\"\",password:\"\"},errors:{}};this.schema={username:Joi.string().required().label(\"Username\"),password:Joi.string().required().label(\"Password\")};this.doSubmit=async()=>{try{const{data}=this.state;await auth.login({username:data.username,password:data.password});const{state}=this.props.location;window.location=state?state.from.pathname:\"/home\";}catch(ex){if(ex.response){const errors={...this.state.errors};errors.username=ex.response.data;this.setState({errors});}}};}render(){if(auth.getCurrentUser())return/*#__PURE__*/_jsx(Redirect,{to:\"/home\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[this.renderInput(\"username\",\"Username\"),this.renderInput(\"password\",\"Password\",\"password\"),this.renderButton(\"Login\")]}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})]});}}export default LoginForm;","map":{"version":3,"names":["React","Link","Redirect","Joi","Form","auth","jsx","_jsx","jsxs","_jsxs","LoginForm","constructor","arguments","state","data","username","password","errors","schema","string","required","label","doSubmit","login","props","location","window","from","pathname","ex","response","setState","render","getCurrentUser","to","children","onSubmit","handleSubmit","renderInput","renderButton"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/loginForm.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./common/form\";\r\nimport auth from \"../services/authService\";\r\n\r\nclass LoginForm extends Form {\r\n  state = {\r\n    data: { username: \"\", password: \"\" },\r\n    errors: {},\r\n  };\r\n\r\n  schema = {\r\n    username: Joi.string().required().label(\"Username\"),\r\n    password: Joi.string().required().label(\"Password\"),\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    try {\r\n      const { data } = this.state;\r\n      await auth.login({ username: data.username, password: data.password });\r\n\r\n      const { state } = this.props.location;\r\n      window.location = state ? state.from.pathname : \"/home\";\r\n    } catch (ex) {\r\n      if (ex.response) {\r\n        const errors = { ...this.state.errors };\r\n        errors.username = ex.response.data;\r\n        this.setState({ errors });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (auth.getCurrentUser()) return <Redirect to=\"/home\" />;\r\n\r\n    return (\r\n      <div>\r\n        <h1>Login</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput(\"username\", \"Username\")}\r\n          {this.renderInput(\"password\", \"Password\", \"password\")}\r\n          {this.renderButton(\"Login\")}\r\n        </form>\r\n        <Link to=\"/signup\">Sign Up</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,QAAQ,KAAQ,kBAAkB,CACjD,MAAO,CAAAC,GAAG,KAAM,aAAa,CAC7B,MAAO,CAAAC,IAAI,KAAM,eAAe,CAChC,MAAO,CAAAC,IAAI,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,SAAS,QAAS,CAAAN,IAAK,CAAAO,YAAA,WAAAC,SAAA,OAC3BC,KAAK,CAAG,CACNC,IAAI,CAAE,CAAEC,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CACpCC,MAAM,CAAE,CAAC,CACX,CAAC,MAEDC,MAAM,CAAG,CACPH,QAAQ,CAAEZ,GAAG,CAACgB,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAU,CAAC,CACnDL,QAAQ,CAAEb,GAAG,CAACgB,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAU,CACpD,CAAC,MAEDC,QAAQ,CAAG,SAAY,CACrB,GAAI,CACF,KAAM,CAAER,IAAK,CAAC,CAAG,IAAI,CAACD,KAAK,CAC3B,KAAM,CAAAR,IAAI,CAACkB,KAAK,CAAC,CAAER,QAAQ,CAAED,IAAI,CAACC,QAAQ,CAAEC,QAAQ,CAAEF,IAAI,CAACE,QAAS,CAAC,CAAC,CAEtE,KAAM,CAAEH,KAAM,CAAC,CAAG,IAAI,CAACW,KAAK,CAACC,QAAQ,CACrCC,MAAM,CAACD,QAAQ,CAAGZ,KAAK,CAAGA,KAAK,CAACc,IAAI,CAACC,QAAQ,CAAG,OAAO,CACzD,CAAE,MAAOC,EAAE,CAAE,CACX,GAAIA,EAAE,CAACC,QAAQ,CAAE,CACf,KAAM,CAAAb,MAAM,CAAG,CAAE,GAAG,IAAI,CAACJ,KAAK,CAACI,MAAO,CAAC,CACvCA,MAAM,CAACF,QAAQ,CAAGc,EAAE,CAACC,QAAQ,CAAChB,IAAI,CAClC,IAAI,CAACiB,QAAQ,CAAC,CAAEd,MAAO,CAAC,CAAC,CAC3B,CACF,CACF,CAAC,EAEDe,MAAMA,CAAA,CAAG,CACP,GAAI3B,IAAI,CAAC4B,cAAc,CAAC,CAAC,CAAE,mBAAO1B,IAAA,CAACL,QAAQ,EAACgC,EAAE,CAAC,OAAO,CAAE,CAAC,CAEzD,mBACEzB,KAAA,QAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,CAAI,OAAK,CAAI,CAAC,cACd1B,KAAA,SAAM2B,QAAQ,CAAE,IAAI,CAACC,YAAa,CAAAF,QAAA,EAC/B,IAAI,CAACG,WAAW,CAAC,UAAU,CAAE,UAAU,CAAC,CACxC,IAAI,CAACA,WAAW,CAAC,UAAU,CAAE,UAAU,CAAE,UAAU,CAAC,CACpD,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,EACvB,CAAC,cACPhC,IAAA,CAACN,IAAI,EAACiC,EAAE,CAAC,SAAS,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,EAC9B,CAAC,CAEV,CACF,CAEA,cAAe,CAAAzB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}