{"ast":null,"code":"import React,{Component}from\"react\";import SearchBox from\"./common/searchBox\";import{getDrivers}from\"../services/driverRecordsservices\";import userbanner from\"../images/userbanner.jpg\";import{Route}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";class DriverRecord extends Component{constructor(){super(...arguments);this.state={drivers:[],selectedDriver:\"\",searchQuery:\"\"};this.handleUserSelect=user=>{this.setState({selectedDriver:user});};this.handleSearch=query=>{this.setState({searchQuery:query});};this.filterUsers=()=>{const{drivers,searchQuery}=this.state;if(!searchQuery)return drivers;const filtereddrivers=drivers.filter(user=>{var _user$firstName;return user===null||user===void 0?void 0:(_user$firstName=user.firstName)===null||_user$firstName===void 0?void 0:_user$firstName.includes(searchQuery);});const remainingdrivers=drivers.filter(user=>!(filtereddrivers!==null&&filtereddrivers!==void 0&&filtereddrivers.includes(user)));return[...filtereddrivers,...remainingdrivers];};}async componentDidMount(){try{const{data}=await getDrivers();this.setState({drivers:data.gettingDrivers});this.setState({selectedDriver:data.gettingDrivers[0]});}catch(error){console.error(\"Error fetching users:\",error.message);}}render(){const{selectedDriver,searchQuery}=this.state;const filteredDrivers=this.filterUsers();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{marginTop:\"20px\",marginLeft:\"20px\",width:\"400px\",padding:\"20px\",borderRadius:\"20px\",height:\"610px\",border:\"none\",boxShadow:\"0px 0px 10px rgba(0, 0, 0, 0.1)\",transition:\"transform 0.2s, background-color 0.2s\"},children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",style:{marginTop:16},children:filteredDrivers&&filteredDrivers.map(user=>/*#__PURE__*/_jsx(\"li\",{className:user===selectedDriver?\"list-group-item active\":\"list-group-item\",onClick:()=>this.handleUserSelect(user),children:user.firstName},user._id))})})}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{margin:\"20px\",marginLeft:\"120px\",width:\"870px\",padding:\"20px\",borderRadius:\"20px\",height:\"610px\",border:\"none\",boxShadow:\"0px 0px 10px rgba(0, 0, 0, 0.1)\",transition:\"transform 0.2s, background-color 0.2s\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(SearchBox,{value:searchQuery,onChange:this.handleSearch}),selectedDriver?/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3\",style:{margin:\"30px\",padding:\"15px\",borderRadius:\"10px\",height:\"300px\",border:\"none\",width:\"600px\",boxShadow:\"0px 0px 10px rgba(0, 0, 0, 0.1)\",backgroundColor:\"#ffffff\",transition:\"transform 0.2s, background-color 0.2s\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:userbanner,className:\"img-fluid rounded-start\",alt:\"...\",style:{maxWidth:\"100%\",maxHeight:\"100%\",minWidth:\"100%\",minHeight:\"100%\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:selectedDriver.firstName||\"No drivers\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"UserName: \",selectedDriver.userName,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Contact Number: \",selectedDriver.contactNumber,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Email: \",selectedDriver.email,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Address: \",selectedDriver.address,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"NIC: \",selectedDriver.NIC,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Licence Number: \",selectedDriver.licenseNumber,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Bus: \",selectedDriver.assignedVehicle,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Route,{to:\"/seeSnaps\",render:props=>/*#__PURE__*/_jsx(\"a\",{href:\"/seeSnaps\",className:\"btn btn-warning\",onClick:()=>props.history.push(\"/seeSnaps\",{selectedDriver}),children:\"See Snaps\"})})]})]})})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"No drivers available\"})]})})]})});}}export default DriverRecord;","map":{"version":3,"names":["React","Component","SearchBox","getDrivers","userbanner","Route","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DriverRecord","constructor","arguments","state","drivers","selectedDriver","searchQuery","handleUserSelect","user","setState","handleSearch","query","filterUsers","filtereddrivers","filter","_user$firstName","firstName","includes","remainingdrivers","componentDidMount","data","gettingDrivers","error","console","message","render","filteredDrivers","children","className","style","marginTop","marginLeft","width","padding","borderRadius","height","border","boxShadow","transition","map","onClick","_id","margin","value","onChange","backgroundColor","src","alt","maxWidth","maxHeight","minWidth","minHeight","userName","contactNumber","email","address","NIC","licenseNumber","assignedVehicle","to","props","href","history","push"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/DriverRecord.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport SearchBox from \"./common/searchBox\";\nimport { getDrivers } from \"../services/driverRecordsservices\";\nimport userbanner from \"../images/userbanner.jpg\";\nimport { Route } from \"react-router-dom\";\n\nclass DriverRecord extends Component {\n  state = {\n    drivers: [],\n    selectedDriver: \"\",\n    searchQuery: \"\",\n  };\n\n  async componentDidMount() {\n    try {\n      const { data } = await getDrivers();\n      this.setState({ drivers: data.gettingDrivers });\n      this.setState({ selectedDriver: data.gettingDrivers[0] });\n    } catch (error) {\n      console.error(\"Error fetching users:\", error.message);\n    }\n  }\n\n  handleUserSelect = (user) => {\n    this.setState({ selectedDriver: user });\n  };\n\n  handleSearch = (query) => {\n    this.setState({ searchQuery: query });\n  };\n\n  filterUsers = () => {\n    const { drivers, searchQuery } = this.state;\n    if (!searchQuery) return drivers;\n\n    const filtereddrivers = drivers.filter((user) =>\n      user?.firstName?.includes(searchQuery)\n    );\n\n    const remainingdrivers = drivers.filter(\n      (user) => !filtereddrivers?.includes(user)\n    );\n\n    return [...filtereddrivers, ...remainingdrivers];\n  };\n\n  render() {\n    const { selectedDriver, searchQuery } = this.state;\n    const filteredDrivers = this.filterUsers();\n\n    return (\n      <>\n        <div className=\"row\">\n          <div className=\"col-3\">\n            <div\n              className=\"card\"\n              style={{\n                marginTop: \"20px\",\n                marginLeft: \"20px\",\n                width: \"400px\",\n                padding: \"20px\",\n                borderRadius: \"20px\",\n                height: \"610px\",\n                border: \"none\",\n                boxShadow: \"0px 0px 10px rgba(0, 0, 0, 0.1)\",\n                transition: \"transform 0.2s, background-color 0.2s\",\n              }}\n            >\n              <ul className=\"list-group\" style={{ marginTop: 16 }}>\n                {filteredDrivers &&\n                  filteredDrivers.map((user) => (\n                    <li\n                      key={user._id}\n                      className={\n                        user === selectedDriver\n                          ? \"list-group-item active\"\n                          : \"list-group-item\"\n                      }\n                      onClick={() => this.handleUserSelect(user)}\n                    >\n                      {user.firstName}\n                    </li>\n                  ))}\n              </ul>\n            </div>\n          </div>\n          <div\n            className=\"card\"\n            style={{\n              margin: \"20px\",\n              marginLeft: \"120px\",\n\n              width: \"870px\",\n              padding: \"20px\",\n              borderRadius: \"20px\",\n              height: \"610px\",\n              border: \"none\",\n              boxShadow: \"0px 0px 10px rgba(0, 0, 0, 0.1)\",\n              transition: \"transform 0.2s, background-color 0.2s\",\n            }}\n          >\n            <div className=\"col\">\n              <SearchBox value={searchQuery} onChange={this.handleSearch} />\n              {selectedDriver ? (\n                <div\n                  className=\"card mb-3\"\n                  style={{\n                    margin: \"30px\",\n                    padding: \"15px\",\n                    borderRadius: \"10px\",\n                    height: \"300px\",\n                    border: \"none\",\n                    width: \"600px\",\n                    boxShadow: \"0px 0px 10px rgba(0, 0, 0, 0.1)\",\n                    backgroundColor: \"#ffffff\",\n                    transition: \"transform 0.2s, background-color 0.2s\",\n                  }}\n                >\n                  <div className=\"row g-0\">\n                    <div className=\"col-md-4\">\n                      <img\n                        src={userbanner}\n                        className=\"img-fluid rounded-start\"\n                        alt=\"...\"\n                        style={{\n                          maxWidth: \"100%\",\n                          maxHeight: \"100%\",\n                          minWidth: \"100%\",\n                          minHeight: \"100%\",\n                        }}\n                      />\n                    </div>\n                    <div className=\"col-md-8\">\n                      <div className=\"card-body\">\n                        <h5 className=\"card-title\">\n                          {selectedDriver.firstName || \"No drivers\"}\n                        </h5>\n                        <p className=\"card-text\">\n                          UserName: {selectedDriver.userName} <br />\n                          Contact Number: {selectedDriver.contactNumber} <br />\n                          Email: {selectedDriver.email} <br />\n                          Address: {selectedDriver.address} <br />\n                          NIC: {selectedDriver.NIC} <br />\n                          Licence Number: {selectedDriver.licenseNumber} <br />\n                          Bus: {selectedDriver.assignedVehicle} <br />\n                          <Route\n                            to=\"/seeSnaps\"\n                            render={(props) => (\n                              <a\n                                href=\"/seeSnaps\"\n                                className=\"btn btn-warning\"\n                                onClick={() =>\n                                  props.history.push(\"/seeSnaps\", {\n                                    selectedDriver,\n                                  })\n                                }\n                              >\n                                See Snaps\n                              </a>\n                            )}\n                          />\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <p>No drivers available</p>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default DriverRecord;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}