{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\nimport http from \"./httpService\";\nimport config from \"../config.json\";\nconst apiEndpoint = config.apiUrl + \"/Admin/login\";\nconst tokenKey = \"token\";\nhttp.setJwt(getJwt());\nexport async function login(obj) {\n  const {\n    data: jwt\n  } = await http.post(apiEndpoint, obj);\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getCurrentUserAgency() {\n  try {\n    const agency = jwtDecode(localStorage.getItem(tokenKey)).user.name;\n    return agency;\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n  getCurrentUserAgency\n};","map":{"version":3,"names":["jwtDecode","http","config","apiEndpoint","apiUrl","tokenKey","setJwt","getJwt","login","obj","data","jwt","post","localStorage","setItem","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex","getCurrentUserAgency","agency","user","name"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/services/authService.js"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport http from \"./httpService\";\nimport config from \"../config.json\";\n\nconst apiEndpoint = config.apiUrl + \"/Admin/login\";\nconst tokenKey = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function login(obj) {\n  const { data: jwt } = await http.post(apiEndpoint, obj);\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getCurrentUserAgency() {\n  try {\n    const agency = jwtDecode(localStorage.getItem(tokenKey)).user.name;\n    return agency;\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n  getCurrentUserAgency,\n};\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,YAAY;AAClC,OAAOC,IAAI,MAAM,eAAe;AAChC,OAAOC,MAAM,MAAM,gBAAgB;AAEnC,MAAMC,WAAW,GAAGD,MAAM,CAACE,MAAM,GAAG,cAAc;AAClD,MAAMC,QAAQ,GAAG,OAAO;AAExBJ,IAAI,CAACK,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC;AAErB,OAAO,eAAeC,KAAKA,CAACC,GAAG,EAAE;EAC/B,MAAM;IAAEC,IAAI,EAAEC;EAAI,CAAC,GAAG,MAAMV,IAAI,CAACW,IAAI,CAACT,WAAW,EAAEM,GAAG,CAAC;EACvDI,YAAY,CAACC,OAAO,CAACT,QAAQ,EAAEM,GAAG,CAAC;AACrC;AAEA,OAAO,SAASI,YAAYA,CAACJ,GAAG,EAAE;EAChCE,YAAY,CAACC,OAAO,CAACT,QAAQ,EAAEM,GAAG,CAAC;AACrC;AAEA,OAAO,SAASK,MAAMA,CAAA,EAAG;EACvBH,YAAY,CAACI,UAAU,CAACZ,QAAQ,CAAC;AACnC;AAEA,OAAO,SAASa,cAAcA,CAAA,EAAG;EAC/B,IAAI;IACF,MAAMP,GAAG,GAAGE,YAAY,CAACM,OAAO,CAACd,QAAQ,CAAC;IAC1C,OAAOL,SAAS,CAACW,GAAG,CAAC;EACvB,CAAC,CAAC,OAAOS,EAAE,EAAE;IACX,OAAO,IAAI;EACb;AACF;AAEA,OAAO,SAASC,oBAAoBA,CAAA,EAAG;EACrC,IAAI;IACF,MAAMC,MAAM,GAAGtB,SAAS,CAACa,YAAY,CAACM,OAAO,CAACd,QAAQ,CAAC,CAAC,CAACkB,IAAI,CAACC,IAAI;IAClE,OAAOF,MAAM;EACf,CAAC,CAAC,OAAOF,EAAE,EAAE;IACX,OAAO,IAAI;EACb;AACF;AAEA,OAAO,SAASb,MAAMA,CAAA,EAAG;EACvB,OAAOM,YAAY,CAACM,OAAO,CAACd,QAAQ,CAAC;AACvC;AAEA,eAAe;EACbG,KAAK;EACLO,YAAY;EACZC,MAAM;EACNE,cAAc;EACdX,MAAM;EACNc;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}