{"ast":null,"code":"import React,{Component}from\"react\";import{getUsers}from\"../services/userRecordsService\";import userbanner from\"../images/userbanner.jpg\";import SearchBox from\"./common/searchBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class UserRecord extends Component{constructor(){super(...arguments);this.state={users:[],selectedUser:\"\",children:[],searchQuery:\"\"};this.handleUserSelect=user=>{this.setState({selectedUser:user});};this.handleSearch=query=>{this.setState({searchQuery:query});};this.filterUsers=()=>{const{users,searchQuery}=this.state;if(!searchQuery)return users;const filteredUsers=users.filter(user=>user.fullName.toLowerCase().includes(searchQuery.toLowerCase()));const remainingUsers=users.filter(user=>!filteredUsers.includes(user));return[...filteredUsers,...remainingUsers];};}async componentDidMount(){try{const{data}=await getUsers();this.setState({users:data.users});this.setState({selectedUser:data.users[0]});}catch(error){console.error(\"Error fetching users:\",error.message);}}render(){const{selectedUser,searchQuery}=this.state;const filteredUsers=this.filterUsers();return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",style:{marginTop:16},children:filteredUsers.map(user=>/*#__PURE__*/_jsx(\"li\",{className:user===selectedUser?\"list-group-item active\":\"list-group-item\",onClick:()=>this.handleUserSelect(user),children:user.fullName},user._id))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(SearchBox,{value:searchQuery,onChange:this.handleSearch}),selectedUser?/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3\",style:{maxWidth:\"540px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:userbanner,className:\"img-fluid rounded-start\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.fullName)||\"No users\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Username: \",(selectedUser===null||selectedUser===void 0?void 0:selectedUser.username)||\"\",\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Contact Number: \",(selectedUser===null||selectedUser===void 0?void 0:selectedUser.contactNumber)||\"\",\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Email: \",(selectedUser===null||selectedUser===void 0?void 0:selectedUser.email)||\"\",\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Children:\",\" \",(selectedUser===null||selectedUser===void 0?void 0:selectedUser.children)&&selectedUser.children.length>0&&selectedUser.children.map((child,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[selectedUser.children[index],index<selectedUser.children.length-1&&\", \"]},child._id)),/*#__PURE__*/_jsx(\"br\",{})]})]})})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"No users available\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedUser!==null&&selectedUser!==void 0&&selectedUser.children&&selectedUser.children.length>0&&selectedUser!==null&&selectedUser!==void 0&&selectedUser.childrenData&&selectedUser.childrenData.length>0?selectedUser.childrenData.map(child=>/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3\",style:{maxWidth:\"540px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:userbanner,className:\"img-fluid rounded-start\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:child.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Name: \",child.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Age: \",child.age,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"School: \",child.school,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Address: \",child.pickupAddress,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"VehicleID: \",child.vehicleId,\" \",/*#__PURE__*/_jsx(\"br\",{})]})]})})]})},child._id)):null})]})]});}}export default UserRecord;","map":{"version":3,"names":["React","Component","getUsers","userbanner","SearchBox","jsx","_jsx","jsxs","_jsxs","UserRecord","constructor","arguments","state","users","selectedUser","children","searchQuery","handleUserSelect","user","setState","handleSearch","query","filterUsers","filteredUsers","filter","fullName","toLowerCase","includes","remainingUsers","componentDidMount","data","error","console","message","render","className","style","marginTop","map","onClick","_id","value","onChange","maxWidth","src","alt","username","contactNumber","email","length","child","index","Fragment","childrenData","name","age","school","pickupAddress","vehicleId"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/UserRecord.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport { getUsers } from \"../services/userRecordsService\";\nimport userbanner from \"../images/userbanner.jpg\";\nimport SearchBox from \"./common/searchBox\";\n\nclass UserRecord extends Component {\n  state = {\n    users: [],\n    selectedUser: \"\",\n    children: [],\n    searchQuery: \"\",\n  };\n\n  async componentDidMount() {\n    try {\n      const { data } = await getUsers();\n      this.setState({ users: data.users });\n      this.setState({ selectedUser: data.users[0] });\n    } catch (error) {\n      console.error(\"Error fetching users:\", error.message);\n    }\n  }\n\n  handleUserSelect = (user) => {\n    this.setState({ selectedUser: user });\n  };\n\n  handleSearch = (query) => {\n    this.setState({ searchQuery: query });\n  };\n\n  filterUsers = () => {\n    const { users, searchQuery } = this.state;\n    if (!searchQuery) return users;\n\n    const filteredUsers = users.filter((user) =>\n      user.fullName.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    const remainingUsers = users.filter(\n      (user) => !filteredUsers.includes(user)\n    );\n\n    return [...filteredUsers, ...remainingUsers];\n  };\n\n  render() {\n    const { selectedUser, searchQuery } = this.state;\n    const filteredUsers = this.filterUsers();\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-3\">\n          <ul className=\"list-group\" style={{ marginTop: 16 }}>\n            {filteredUsers.map((user) => (\n              <li\n                key={user._id}\n                className={\n                  user === selectedUser\n                    ? \"list-group-item active\"\n                    : \"list-group-item\"\n                }\n                onClick={() => this.handleUserSelect(user)}\n              >\n                {user.fullName}\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className=\"col\">\n          <SearchBox value={searchQuery} onChange={this.handleSearch} />\n          {selectedUser ? (\n            <div className=\"card mb-3\" style={{ maxWidth: \"540px\" }}>\n              <div className=\"row g-0\">\n                <div className=\"col-md-4\">\n                  <img\n                    src={userbanner}\n                    className=\"img-fluid rounded-start\"\n                    alt=\"...\"\n                  />\n                </div>\n                <div className=\"col-md-8\">\n                  <div className=\"card-body\">\n                    <h5 className=\"card-title\">\n                      {selectedUser?.fullName || \"No users\"}\n                    </h5>\n                    <p className=\"card-text\">\n                      Username: {selectedUser?.username || \"\"} <br />\n                      Contact Number: {selectedUser?.contactNumber || \"\"} <br />\n                      Email: {selectedUser?.email || \"\"} <br />\n                      Children:{\" \"}\n                      {selectedUser?.children &&\n                        selectedUser.children.length > 0 &&\n                        selectedUser.children.map((child, index) => (\n                          <React.Fragment key={child._id}>\n                            {selectedUser.children[index]}\n                            {index < selectedUser.children.length - 1 && \", \"}\n                          </React.Fragment>\n                        ))}\n                      <br />\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <p>No users available</p>\n          )}\n          <div>\n            {selectedUser?.children &&\n            selectedUser.children.length > 0 &&\n            selectedUser?.childrenData &&\n            selectedUser.childrenData.length > 0\n              ? selectedUser.childrenData.map((child) => (\n                  <div\n                    className=\"card mb-3\"\n                    style={{ maxWidth: \"540px\" }}\n                    key={child._id}\n                  >\n                    <div className=\"row g-0\">\n                      <div className=\"col-md-4\">\n                        <img\n                          src={userbanner}\n                          className=\"img-fluid rounded-start\"\n                          alt=\"...\"\n                        />\n                      </div>\n                      <div className=\"col-md-8\">\n                        <div className=\"card-body\">\n                          <h5 className=\"card-title\">{child.name}</h5>\n                          <p className=\"card-text\">\n                            Name: {child.name} <br />\n                            Age: {child.age} <br />\n                            School: {child.school} <br />\n                            Address: {child.pickupAddress} <br />\n                            VehicleID: {child.vehicleId} <br />\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UserRecord;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}