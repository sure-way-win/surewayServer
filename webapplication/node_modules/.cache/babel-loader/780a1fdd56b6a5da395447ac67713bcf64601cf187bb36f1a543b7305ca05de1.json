{"ast":null,"code":"import jwtDecode from\"jwt-decode\";import http from\"./httpService\";import config from\"../config.json\";const apiEndpoint=config.apiUrl+\"/Admin/login\";const tokenKey=\"token\";http.setJwt(getJwt());export async function login(obj){const{data:jwt}=await http.post(apiEndpoint,obj);localStorage.setItem(tokenKey,jwt);}export function loginWithJwt(jwt){localStorage.setItem(tokenKey,jwt);}export function logout(){localStorage.removeItem(tokenKey);}export function getCurrentUser(){try{const jwt=localStorage.getItem(tokenKey);return jwtDecode(jwt);}catch(ex){return null;}}export function getCurrentUserAgency(){try{const agency=jwtDecode(localStorage.getItem(tokenKey)).user.name;return agency;}catch(ex){return null;}}export function getJwt(){return localStorage.getItem(tokenKey);}export default{login,loginWithJwt,logout,getCurrentUser,getJwt,getCurrentUserAgency};","map":{"version":3,"names":["jwtDecode","http","config","apiEndpoint","apiUrl","tokenKey","setJwt","getJwt","login","obj","data","jwt","post","localStorage","setItem","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex","getCurrentUserAgency","agency","user","name"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/services/authService.js"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport http from \"./httpService\";\nimport config from \"../config.json\";\n\nconst apiEndpoint = config.apiUrl + \"/Admin/login\";\nconst tokenKey = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function login(obj) {\n  const { data: jwt } = await http.post(apiEndpoint, obj);\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getCurrentUserAgency() {\n  try {\n    const agency = jwtDecode(localStorage.getItem(tokenKey)).user.name;\n    return agency;\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n  getCurrentUserAgency,\n};\n"],"mappings":"AAAA,MAAO,CAAAA,SAAS,KAAM,YAAY,CAClC,MAAO,CAAAC,IAAI,KAAM,eAAe,CAChC,MAAO,CAAAC,MAAM,KAAM,gBAAgB,CAEnC,KAAM,CAAAC,WAAW,CAAGD,MAAM,CAACE,MAAM,CAAG,cAAc,CAClD,KAAM,CAAAC,QAAQ,CAAG,OAAO,CAExBJ,IAAI,CAACK,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAErB,MAAO,eAAe,CAAAC,KAAKA,CAACC,GAAG,CAAE,CAC/B,KAAM,CAAEC,IAAI,CAAEC,GAAI,CAAC,CAAG,KAAM,CAAAV,IAAI,CAACW,IAAI,CAACT,WAAW,CAAEM,GAAG,CAAC,CACvDI,YAAY,CAACC,OAAO,CAACT,QAAQ,CAAEM,GAAG,CAAC,CACrC,CAEA,MAAO,SAAS,CAAAI,YAAYA,CAACJ,GAAG,CAAE,CAChCE,YAAY,CAACC,OAAO,CAACT,QAAQ,CAAEM,GAAG,CAAC,CACrC,CAEA,MAAO,SAAS,CAAAK,MAAMA,CAAA,CAAG,CACvBH,YAAY,CAACI,UAAU,CAACZ,QAAQ,CAAC,CACnC,CAEA,MAAO,SAAS,CAAAa,cAAcA,CAAA,CAAG,CAC/B,GAAI,CACF,KAAM,CAAAP,GAAG,CAAGE,YAAY,CAACM,OAAO,CAACd,QAAQ,CAAC,CAC1C,MAAO,CAAAL,SAAS,CAACW,GAAG,CAAC,CACvB,CAAE,MAAOS,EAAE,CAAE,CACX,MAAO,KAAI,CACb,CACF,CAEA,MAAO,SAAS,CAAAC,oBAAoBA,CAAA,CAAG,CACrC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAGtB,SAAS,CAACa,YAAY,CAACM,OAAO,CAACd,QAAQ,CAAC,CAAC,CAACkB,IAAI,CAACC,IAAI,CAClE,MAAO,CAAAF,MAAM,CACf,CAAE,MAAOF,EAAE,CAAE,CACX,MAAO,KAAI,CACb,CACF,CAEA,MAAO,SAAS,CAAAb,MAAMA,CAAA,CAAG,CACvB,MAAO,CAAAM,YAAY,CAACM,OAAO,CAACd,QAAQ,CAAC,CACvC,CAEA,cAAe,CACbG,KAAK,CACLO,YAAY,CACZC,MAAM,CACNE,cAAc,CACdX,MAAM,CACNc,oBACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}