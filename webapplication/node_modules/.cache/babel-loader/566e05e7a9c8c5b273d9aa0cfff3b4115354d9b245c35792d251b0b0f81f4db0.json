{"ast":null,"code":"import React from\"react\";import Joi from\"joi-browser\";import Form from\"./common/form\";import{addNewBus}from\"../services/busService\";import{getBuses}from\"../services/busService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class Bus extends Form{constructor(){super(...arguments);this.state={data:{vehicleNumber:\"\",School:\"\",SchoolAddress:\"\",seats:\"\",ThingName:\"\"},errors:{},busses:[]};this.schema={vehicleNumber:Joi.string().required().min(6).max(7).label(\"Licence Plate\"),School:Joi.string().required().label(\"School\"),SchoolAddress:Joi.string().required().label(\"SchoolAddress\"),seats:Joi.number().required().label(\"Seats\"),ThingName:Joi.string().required().length(6).label(\"ThingName\")};this.doSubmit=async()=>{try{const{data}=this.state;await addNewBus({vehicleNumber:data.vehicleNumber,School:data.School,SchoolAddress:data.SchoolAddress,seats:data.seats,ThingName:data.ThingName});// Optionally, you can redirect the user or perform other actions after the bus is successfully added.\nconsole.log(\"Bus added successfully!\");}catch(error){console.error(\"Error adding bus:\",error.message);}};}async componentDidMount(){try{const{data}=await getBuses();this.setState({busses:data.registeredVehicles});}catch(error){console.error(\"Error fetching users:\",error.message);}}render(){let{busses}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.state;return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add a new bus\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[this.renderInput(\"vehicleNumber\",\"Licence Plate\"),this.renderInput(\"School\",\"School\"),this.renderInput(\"SchoolAddress\",\"School Address\"),this.renderInput(\"seats\",\"Seats\"),this.renderInput(\"ThingName\",\"SureWay Serial Number\"),/*#__PURE__*/_jsx(\"br\",{}),this.renderButton(\"Save\")]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Assign Busses to new users\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"You can assign Busses to new users here\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/assignBusses\",className:\"btn btn-primary\",children:\"Assign Busses\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Busses\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Licence Plate\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"School\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Seats\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Seats filled\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Driver\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Serial Number\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:busses.map(bus=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:bus.vehicleID}),/*#__PURE__*/_jsx(\"td\",{children:bus.School}),/*#__PURE__*/_jsx(\"td\",{children:bus.seats}),/*#__PURE__*/_jsx(\"td\",{children:bus.seatsFilled}),/*#__PURE__*/_jsx(\"td\",{children:bus.Driver}),/*#__PURE__*/_jsx(\"td\",{children:bus.ThingName})]},bus.licencePlate))})]})]})]});}}export default Bus;","map":{"version":3,"names":["React","Joi","Form","addNewBus","getBuses","jsx","_jsx","jsxs","_jsxs","Bus","constructor","arguments","state","data","vehicleNumber","School","SchoolAddress","seats","ThingName","errors","busses","schema","string","required","min","max","label","number","length","doSubmit","console","log","error","message","componentDidMount","setState","registeredVehicles","render","undefined","className","children","onSubmit","handleSubmit","renderInput","renderButton","href","scope","map","bus","vehicleID","seatsFilled","Driver","licencePlate"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/Bus.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./common/form\";\r\nimport { addNewBus } from \"../services/busService\";\r\nimport { getBuses } from \"../services/busService\";\r\n\r\nclass Bus extends Form {\r\n  state = {\r\n    data: {\r\n      vehicleNumber: \"\",\r\n      School: \"\",\r\n      SchoolAddress: \"\",\r\n      seats: \"\",\r\n      ThingName: \"\",\r\n    },\r\n    errors: {},\r\n    busses: [],\r\n  };\r\n\r\n  schema = {\r\n    vehicleNumber: Joi.string().required().min(6).max(7).label(\"Licence Plate\"),\r\n    School: Joi.string().required().label(\"School\"),\r\n    SchoolAddress: Joi.string().required().label(\"SchoolAddress\"),\r\n    seats: Joi.number().required().label(\"Seats\"),\r\n    ThingName: Joi.string().required().length(6).label(\"ThingName\"),\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const { data } = await getBuses();\r\n      this.setState({ busses: data.registeredVehicles });\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error.message);\r\n    }\r\n  }\r\n\r\n  doSubmit = async () => {\r\n    try {\r\n      const { data } = this.state;\r\n      await addNewBus({\r\n        vehicleNumber: data.vehicleNumber,\r\n        School: data.School,\r\n        SchoolAddress: data.SchoolAddress,\r\n        seats: data.seats,\r\n        ThingName: data.ThingName,\r\n      });\r\n      // Optionally, you can redirect the user or perform other actions after the bus is successfully added.\r\n      console.log(\"Bus added successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error adding bus:\", error.message);\r\n    }\r\n  };\r\n\r\n  render({ busses } = this.state) {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-4\">\r\n          <h1>Add a new bus</h1>\r\n          <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput(\"vehicleNumber\", \"Licence Plate\")}\r\n            {this.renderInput(\"School\", \"School\")}\r\n            {this.renderInput(\"SchoolAddress\", \"School Address\")}\r\n            {this.renderInput(\"seats\", \"Seats\")}\r\n            {this.renderInput(\"ThingName\", \"SureWay Serial Number\")}\r\n            <br />\r\n            {this.renderButton(\"Save\")}\r\n          </form>{\" \"}\r\n          <br />\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Assign Busses to new users</h5>\r\n              <p className=\"card-text\">\r\n                You can assign Busses to new users here\r\n              </p>\r\n              <a href=\"/assignBusses\" className=\"btn btn-primary\">\r\n                Assign Busses\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col\">\r\n          <h1>Busses</h1>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Licence Plate</th>\r\n                <th scope=\"col\">School</th>\r\n                <th scope=\"col\">Seats</th>\r\n                <th scope=\"col\">Seats filled</th>\r\n                <th scope=\"col\">Driver</th>\r\n                <th scope=\"col\">Serial Number</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {busses.map((bus) => (\r\n                <tr key={bus.licencePlate}>\r\n                  <td>{bus.vehicleID}</td>\r\n                  <td>{bus.School}</td>\r\n                  <td>{bus.seats}</td>\r\n                  <td>{bus.seatsFilled}</td>\r\n                  <td>{bus.Driver}</td>\r\n                  <td>{bus.ThingName}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Bus;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}