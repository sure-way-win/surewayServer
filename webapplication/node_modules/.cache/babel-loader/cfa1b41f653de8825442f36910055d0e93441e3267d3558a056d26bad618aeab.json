{"ast":null,"code":"import React,{useEffect,useState,useRef,memo}from\"react\";import{Route}from\"react-router-dom\";import{gettVehicleSnap}from\"../services/snapService\";import{triggerSnap}from\"../services/snapService\";import io from\"socket.io-client\";import{APIProvider,Map,useMapsLibrary,useMap,Marker}from\"@vis.gl/react-google-maps\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const SocketClient=props=>{const{bus}=props.location.state||{};// Add default value for destructuring\nconst[messages,setMessages]=useState([]);useEffect(()=>{// Replace 'http://localhost:3001' with the URL where your Socket.IO server is running\nconst socket=io(\"http://13.51.79.199:3001\");// Event handler for receiving messages from the server\nsocket.on(bus===null||bus===void 0?void 0:bus.ThingName,message=>{//console.log(\"Received message from server:\", message);\nsetMessages(prevMessages=>[...prevMessages,message]);});// Event handler for connecting to the Socket.IO server\nsocket.on(\"connect\",()=>{console.log(\"Connected to Socket.IO server\");});// Event handler for potential errors\nsocket.on(\"error\",error=>{console.error(\"Socket.IO error:\",error);// Handle the error as needed\n});// Cleanup on component unmount\nreturn()=>{console.log(\"Disconnecting from Socket.IO server\");socket.disconnect();};},[]);// Empty dependency array ensures that the effect runs only once\n// Log the current state of messages whenever it changes\nuseEffect(()=>{//console.log(\"Current messages state:\", messages);\n},[messages]);//export default function LocationTracking() {\nconst cent={lat:7.291418,lng:80.636696};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{height:\"80vh\",width:\"100%\"},children:/*#__PURE__*/_jsx(APIProvider,{apiKey:\"AIzaSyD3iZ52fsbEPy64MJPTVxJLlePde16xAMc\",children:/*#__PURE__*/_jsxs(Map,{center:cent,zoom:12,mapId:\"5e1c67490bdc79a3\",fullscreenControl:false,children:[messages.map((message,index)=>/*#__PURE__*/_jsx(DynamicMarker,{position:{lat:message===null||message===void 0?void 0:message.latitude,lng:message===null||message===void 0?void 0:message.longitude}},index)),/*#__PURE__*/_jsx(Directions,{endAddress:bus===null||bus===void 0?void 0:bus.SchoolAddress})]})})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-primary\",onClick:()=>triggerSnap({thingName:bus===null||bus===void 0?void 0:bus.ThingName}),children:\"Snap\"}),/*#__PURE__*/_jsx(Route,{to:\"/vehicleSnap\",render:props=>/*#__PURE__*/_jsx(\"a\",{href:\"/vehicleSnap\",className:\"btn btn-primary\",onClick:()=>props.history.push(\"/vehicleSnap\",{bus}),children:\"See Last Snap\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Received AWS IoT Messages:\"}),/*#__PURE__*/_jsx(\"ul\",{children:messages.map((message,index)=>/*#__PURE__*/_jsx(\"li\",{children:JSON.stringify(message)},index))})]})]});};//};\nfunction Directions(_ref){let{endAddress}=_ref;const map=useMap();const routesLibrary=useMapsLibrary(\"routes\");const[directionService,setDirectionService]=useState();const[directionsRenderer,setDirectionsRenderer]=useState();const[routes,setRoutes]=useState([]);const[routeIndex,setRouteIndex]=useState(0);const selected=routes[routeIndex];const leg=selected===null||selected===void 0?void 0:selected.legs[0];useEffect(()=>{if(!map||!routesLibrary)return;setDirectionService(new routesLibrary.DirectionsService());setDirectionsRenderer(new routesLibrary.DirectionsRenderer({map}));},[map,routesLibrary]);useEffect(()=>{if(!directionService||!directionsRenderer)return;const start={location:\"University of Peradeniya, Prof. E. O. E. Pereira Mawatha, Kandy\",stopover:true};const end={location:endAddress,stopover:true};const waypoints=[//{ location: \"31, Colombo Road, Piliyandala 10300\", stopover: true }, // Origin\n{location:\"Kingswood College, Randles Hill, Peradeniya Rd, Kandy 20000\",stopover:true},// Second destination\n{location:\"Sangaraja Mawatha, Kandy\",stopover:true}// Second destination\n//{ location: \"Maradana Rd, Colombo 01000\", stopover: true }, // First destination\n// Add more waypoints with stopover: true for each\n];directionService.route({origin:start.location,destination:end.location,waypoints:waypoints.map(waypoint=>({location:waypoint.location,stopover:waypoint.stopover})),// Exclude origin and destination from waypoints array\ntravelMode:\"DRIVING\",provideRouteAlternatives:true}).then(Response=>{directionsRenderer.setDirections(Response);console.log(Response);setRoutes(Response.routes);});},[directionService,directionsRenderer]);//console.log(\"directionService\", directionService);\nconsole.log(routes.selected);if(!leg)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{width:\"200px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Directions\"}),/*#__PURE__*/_jsxs(\"p1\",{children:[\"Distance: \",leg.distance.text]}),/*#__PURE__*/_jsxs(\"p1\",{children:[\"Duration: \",leg.duration.text]})]});}// const DynamicMarker = ({ position }) => {\n//   const map = useMap();\n//   const markerRef = useRef(null);\n//   useEffect(() => {\n//     if (!map || !position) return;\n//     // Create marker if it doesn't exist\n//     if (!markerRef.current) {\n//       markerRef.current = new window.google.maps.Marker({\n//         position,\n//         map,\n//       });\n//     } else {\n//       // Update marker position if it exists\n//       markerRef.current.setPosition(position);\n//     }\n//     return () => {\n//       // Cleanup marker on unmount\n//       markerRef.current.setMap(null);\n//     };\n//   }, [map, position]);\n//   return null; // No need to render anything for the marker\n// };\n// const DynamicMarker = memo(({ position }) => {\n//   // Memoize the DynamicMarker component\n//   const map = useMap();\n//   const markerRef = useRef(null);\n//   useEffect(() => {\n//     if (!map || !position) return;\n//     // Create marker if it doesn't exist or update position\n//     if (!markerRef.current) {\n//       markerRef.current = new window.google.maps.Marker({\n//         position,\n//         map,\n//       });\n//     } else {\n//       markerRef.current.setPosition(position);\n//     }\n//     return () => {\n//       // Cleanup marker on unmount\n//       markerRef.current.setMap(null);\n//     };\n//   }, [map, position]); // Only re-run effect if map or position changes\n//   return null; // No need to render anything for the marker\n// });\nconst DynamicMarker=/*#__PURE__*/memo(_ref2=>{let{position}=_ref2;const map=useMap();const markerRef=useRef(null);useEffect(()=>{if(!map||!position)return;if(!markerRef.current){markerRef.current=new window.google.maps.Marker({position,map});}else{// Animate marker to new position\nanimateMarker(markerRef.current,position);}return()=>{markerRef.current.setMap(null);};},[map,position]);const animateMarker=(marker,newPosition)=>{const start=marker.getPosition();const end=new window.google.maps.LatLng(newPosition.lat,newPosition.lng);let t=0;const duration=1000;// Animation duration in milliseconds\nconst animate=()=>{if(t<duration){const lat=start.lat()+(end.lat()-start.lat())*t/duration;const lng=start.lng()+(end.lng()-start.lng())*t/duration;const newPos=new window.google.maps.LatLng(lat,lng);marker.setPosition(newPos);t+=16;// 60 frames per second\nrequestAnimationFrame(animate);}else{marker.setPosition(end);}};animate();};return null;});const AnimatedMarker=_ref3=>{let{positions}=_ref3;const map=useMap();const markerRef=useRef(null);useEffect(()=>{if(!map||!positions||positions.length===0)return;const lat=positions[positions.length-1].latitude;const lng=positions[positions.length-1].longitude;const lastPosition={lat,lng};if(!markerRef.current){markerRef.current=new window.L.Marker(lastPosition).addTo(map);}else{animateMarker(markerRef===null||markerRef===void 0?void 0:markerRef.current,lastPosition);}return()=>{markerRef.current.remove();};},[map,positions]);const animateMarker=(marker,newPosition)=>{const start=marker.getLatLng();const end=new window.L.LatLng(newPosition.lat,newPosition.lng);let t=0;const duration=1000;// Animation duration in milliseconds\nconst animate=()=>{if(t<duration){const lat=start.lat+(end.lat-start.lat)*t/duration;const lng=start.lng+(end.lng-start.lng)*t/duration;const newPos=new window.L.LatLng(lat,lng);marker.setLatLng(newPos);t+=16;// 60 frames per second\nrequestAnimationFrame(animate);}else{marker.setLatLng(end);}};animate();};return null;};export default SocketClient;","map":{"version":3,"names":["React","useEffect","useState","useRef","memo","Route","gettVehicleSnap","triggerSnap","io","APIProvider","Map","useMapsLibrary","useMap","Marker","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SocketClient","props","bus","location","state","messages","setMessages","socket","on","ThingName","message","prevMessages","console","log","error","disconnect","cent","lat","lng","children","style","height","width","apiKey","center","zoom","mapId","fullscreenControl","map","index","DynamicMarker","position","latitude","longitude","Directions","endAddress","SchoolAddress","type","class","onClick","thingName","to","render","href","className","history","push","JSON","stringify","_ref","routesLibrary","directionService","setDirectionService","directionsRenderer","setDirectionsRenderer","routes","setRoutes","routeIndex","setRouteIndex","selected","leg","legs","DirectionsService","DirectionsRenderer","start","stopover","end","waypoints","route","origin","destination","waypoint","travelMode","provideRouteAlternatives","then","Response","setDirections","distance","text","duration","_ref2","markerRef","current","window","google","maps","animateMarker","setMap","marker","newPosition","getPosition","LatLng","t","animate","newPos","setPosition","requestAnimationFrame","AnimatedMarker","_ref3","positions","length","lastPosition","L","addTo","remove","getLatLng","setLatLng"],"sources":["C:/Users/ASUS/Documents/GitHub/e19-3yp-School-Van-Tracking-System/code/webapplication/src/components/LocationTracking.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef, memo } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { gettVehicleSnap } from \"../services/snapService\";\r\nimport { triggerSnap } from \"../services/snapService\";\r\nimport io from \"socket.io-client\";\r\nimport {\r\n  APIProvider,\r\n  Map,\r\n  useMapsLibrary,\r\n  useMap,\r\n  Marker,\r\n} from \"@vis.gl/react-google-maps\";\r\n\r\nconst SocketClient = (props) => {\r\n  const { bus } = props.location.state || {}; // Add default value for destructuring\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Replace 'http://localhost:3001' with the URL where your Socket.IO server is running\r\n    const socket = io(\"http://13.51.79.199:3001\");\r\n\r\n    // Event handler for receiving messages from the server\r\n    socket.on(bus?.ThingName, (message) => {\r\n      //console.log(\"Received message from server:\", message);\r\n      setMessages((prevMessages) => [...prevMessages, message]);\r\n    });\r\n\r\n    // Event handler for connecting to the Socket.IO server\r\n    socket.on(\"connect\", () => {\r\n      console.log(\"Connected to Socket.IO server\");\r\n    });\r\n\r\n    // Event handler for potential errors\r\n    socket.on(\"error\", (error) => {\r\n      console.error(\"Socket.IO error:\", error);\r\n      // Handle the error as needed\r\n    });\r\n\r\n    // Cleanup on component unmount\r\n    return () => {\r\n      console.log(\"Disconnecting from Socket.IO server\");\r\n      socket.disconnect();\r\n    };\r\n  }, []); // Empty dependency array ensures that the effect runs only once\r\n\r\n  // Log the current state of messages whenever it changes\r\n  useEffect(() => {\r\n    //console.log(\"Current messages state:\", messages);\r\n  }, [messages]);\r\n\r\n  //export default function LocationTracking() {\r\n  const cent = { lat: 7.291418, lng: 80.636696 };\r\n\r\n  return (\r\n    <>\r\n      <div style={{ height: \"80vh\", width: \"100%\" }}>\r\n        <APIProvider apiKey=\"AIzaSyD3iZ52fsbEPy64MJPTVxJLlePde16xAMc\">\r\n          <Map\r\n            center={cent}\r\n            zoom={12}\r\n            mapId=\"5e1c67490bdc79a3\"\r\n            fullscreenControl={false}\r\n          >\r\n            {messages.map((message, index) => (\r\n              <DynamicMarker\r\n                key={index}\r\n                position={{ lat: message?.latitude, lng: message?.longitude }}\r\n              />\r\n            ))}\r\n            {/* <AnimatedMarker positions={messages} /> */}\r\n\r\n            <Directions endAddress={bus?.SchoolAddress} />\r\n          </Map>\r\n        </APIProvider>\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn btn-primary\"\r\n        onClick={() => triggerSnap({ thingName: bus?.ThingName })}\r\n      >\r\n        Snap\r\n      </button>\r\n      <Route\r\n        to=\"/vehicleSnap\"\r\n        render={(props) => (\r\n          <a\r\n            href=\"/vehicleSnap\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => props.history.push(\"/vehicleSnap\", { bus })}\r\n          >\r\n            See Last Snap\r\n          </a>\r\n        )}\r\n      />\r\n      <div>\r\n        <h1>Received AWS IoT Messages:</h1>\r\n        <ul>\r\n          {messages.map((message, index) => (\r\n            <li key={index}>{JSON.stringify(message)}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n//};\r\n\r\nfunction Directions({ endAddress }) {\r\n  const map = useMap();\r\n  const routesLibrary = useMapsLibrary(\"routes\");\r\n  const [directionService, setDirectionService] = useState();\r\n  const [directionsRenderer, setDirectionsRenderer] = useState();\r\n  const [routes, setRoutes] = useState([]);\r\n  const [routeIndex, setRouteIndex] = useState(0);\r\n  const selected = routes[routeIndex];\r\n  const leg = selected?.legs[0];\r\n\r\n  useEffect(() => {\r\n    if (!map || !routesLibrary) return;\r\n    setDirectionService(new routesLibrary.DirectionsService());\r\n    setDirectionsRenderer(new routesLibrary.DirectionsRenderer({ map }));\r\n  }, [map, routesLibrary]);\r\n\r\n  useEffect(() => {\r\n    if (!directionService || !directionsRenderer) return;\r\n\r\n    const start = {\r\n      location:\r\n        \"University of Peradeniya, Prof. E. O. E. Pereira Mawatha, Kandy\",\r\n      stopover: true,\r\n    };\r\n    const end = { location: endAddress, stopover: true };\r\n\r\n    const waypoints = [\r\n      //{ location: \"31, Colombo Road, Piliyandala 10300\", stopover: true }, // Origin\r\n      {\r\n        location: \"Kingswood College, Randles Hill, Peradeniya Rd, Kandy 20000\",\r\n        stopover: true,\r\n      }, // Second destination\r\n      {\r\n        location: \"Sangaraja Mawatha, Kandy\",\r\n        stopover: true,\r\n      }, // Second destination\r\n      //{ location: \"Maradana Rd, Colombo 01000\", stopover: true }, // First destination\r\n      // Add more waypoints with stopover: true for each\r\n    ];\r\n\r\n    directionService\r\n      .route({\r\n        origin: start.location,\r\n        destination: end.location,\r\n        waypoints: waypoints.map((waypoint) => ({\r\n          location: waypoint.location,\r\n          stopover: waypoint.stopover,\r\n        })), // Exclude origin and destination from waypoints array\r\n        travelMode: \"DRIVING\",\r\n        provideRouteAlternatives: true,\r\n      })\r\n      .then((Response) => {\r\n        directionsRenderer.setDirections(Response);\r\n        console.log(Response);\r\n        setRoutes(Response.routes);\r\n      });\r\n  }, [directionService, directionsRenderer]);\r\n\r\n  //console.log(\"directionService\", directionService);\r\n  console.log(routes.selected);\r\n\r\n  if (!leg) return null;\r\n\r\n  return (\r\n    <div className=\"card\" style={{ width: \"200px\" }}>\r\n      <h1>Directions</h1>\r\n      <p1>Distance: {leg.distance.text}</p1>\r\n      <p1>Duration: {leg.duration.text}</p1>\r\n    </div>\r\n  );\r\n}\r\n\r\n// const DynamicMarker = ({ position }) => {\r\n//   const map = useMap();\r\n//   const markerRef = useRef(null);\r\n\r\n//   useEffect(() => {\r\n//     if (!map || !position) return;\r\n\r\n//     // Create marker if it doesn't exist\r\n//     if (!markerRef.current) {\r\n//       markerRef.current = new window.google.maps.Marker({\r\n//         position,\r\n//         map,\r\n//       });\r\n//     } else {\r\n//       // Update marker position if it exists\r\n//       markerRef.current.setPosition(position);\r\n//     }\r\n\r\n//     return () => {\r\n//       // Cleanup marker on unmount\r\n//       markerRef.current.setMap(null);\r\n//     };\r\n//   }, [map, position]);\r\n\r\n//   return null; // No need to render anything for the marker\r\n// };\r\n\r\n// const DynamicMarker = memo(({ position }) => {\r\n//   // Memoize the DynamicMarker component\r\n//   const map = useMap();\r\n//   const markerRef = useRef(null);\r\n\r\n//   useEffect(() => {\r\n//     if (!map || !position) return;\r\n\r\n//     // Create marker if it doesn't exist or update position\r\n//     if (!markerRef.current) {\r\n//       markerRef.current = new window.google.maps.Marker({\r\n//         position,\r\n//         map,\r\n//       });\r\n//     } else {\r\n//       markerRef.current.setPosition(position);\r\n//     }\r\n\r\n//     return () => {\r\n//       // Cleanup marker on unmount\r\n//       markerRef.current.setMap(null);\r\n//     };\r\n//   }, [map, position]); // Only re-run effect if map or position changes\r\n\r\n//   return null; // No need to render anything for the marker\r\n// });\r\n\r\nconst DynamicMarker = memo(({ position }) => {\r\n  const map = useMap();\r\n  const markerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!map || !position) return;\r\n\r\n    if (!markerRef.current) {\r\n      markerRef.current = new window.google.maps.Marker({\r\n        position,\r\n        map,\r\n      });\r\n    } else {\r\n      // Animate marker to new position\r\n      animateMarker(markerRef.current, position);\r\n    }\r\n\r\n    return () => {\r\n      markerRef.current.setMap(null);\r\n    };\r\n  }, [map, position]);\r\n\r\n  const animateMarker = (marker, newPosition) => {\r\n    const start = marker.getPosition();\r\n    const end = new window.google.maps.LatLng(newPosition.lat, newPosition.lng);\r\n    let t = 0;\r\n    const duration = 1000; // Animation duration in milliseconds\r\n\r\n    const animate = () => {\r\n      if (t < duration) {\r\n        const lat = start.lat() + ((end.lat() - start.lat()) * t) / duration;\r\n        const lng = start.lng() + ((end.lng() - start.lng()) * t) / duration;\r\n        const newPos = new window.google.maps.LatLng(lat, lng);\r\n        marker.setPosition(newPos);\r\n        t += 16; // 60 frames per second\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        marker.setPosition(end);\r\n      }\r\n    };\r\n\r\n    animate();\r\n  };\r\n\r\n  return null;\r\n});\r\n\r\nconst AnimatedMarker = ({ positions }) => {\r\n  const map = useMap();\r\n  const markerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!map || !positions || positions.length === 0) return;\r\n\r\n    const lat = positions[positions.length - 1].latitude;\r\n    const lng = positions[positions.length - 1].longitude;\r\n    const lastPosition = { lat, lng };\r\n    if (!markerRef.current) {\r\n      markerRef.current = new window.L.Marker(lastPosition).addTo(map);\r\n    } else {\r\n      animateMarker(markerRef?.current, lastPosition);\r\n    }\r\n\r\n    return () => {\r\n      markerRef.current.remove();\r\n    };\r\n  }, [map, positions]);\r\n\r\n  const animateMarker = (marker, newPosition) => {\r\n    const start = marker.getLatLng();\r\n    const end = new window.L.LatLng(newPosition.lat, newPosition.lng);\r\n    let t = 0;\r\n    const duration = 1000; // Animation duration in milliseconds\r\n\r\n    const animate = () => {\r\n      if (t < duration) {\r\n        const lat = start.lat + ((end.lat - start.lat) * t) / duration;\r\n        const lng = start.lng + ((end.lng - start.lng) * t) / duration;\r\n        const newPos = new window.L.LatLng(lat, lng);\r\n        marker.setLatLng(newPos);\r\n        t += 16; // 60 frames per second\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        marker.setLatLng(end);\r\n      }\r\n    };\r\n\r\n    animate();\r\n  };\r\n\r\n  return null;\r\n};\r\n\r\nexport default SocketClient;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}